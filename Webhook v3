--// CONFIG
local WEBHOOK_URL = "https://discord.com/api/webhooks/1451979120593342589/FNYUawc2lZWcimxgkNuCZ3xW-QOOpulLe-pptTuIFj21hiARDMXkS4Sg0t3_qsql-dWH"

--// SERVICES
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")

--// PLAYER
local plr = Players.LocalPlayer
if not plr then
    pcall(function()
        plr = Players:WaitForChild("LocalPlayer", 5)
    end)
end

local playerName, playerId, displayName = "Unknown", 0, "Unknown"
if plr then
    pcall(function()
        playerName = plr.Name or "Unknown"
        playerId = plr.UserId or 0
        displayName = plr.DisplayName or playerName
    end)
end

--// JOB ID
local jobId = "Unknown"
pcall(function()
    if game.JobId and tostring(game.JobId) ~= "" then
        jobId = tostring(game.JobId)
    end
end)

--// EXECUTOR DETECTION
local function detect_executor()
    if type(identifyexecutor) == "function" then
        local ok, res = pcall(identifyexecutor)
        if ok and res then return tostring(res) end
    end
    if syn and syn.request then return "Synapse X" end
    if KRNL_LOADED or type(kronos) == "table" then return "Krnl" end
    if fluxus and fluxus.request then return "Fluxus" end
    if secure_load then return "Sentinel / Secure" end
    if is_sirhurt_closure then return "SirHurt" end
    if PROTOSMASHER_LOADED then return "ProtoSmasher" end
    if OXYGEN then return "Oxygen" end
    if exploit and exploit.request then return "UnknownExploit" end
    return "Unknown / Undetected"
end

local executorName = detect_executor()

--// GAME NAME
local placeName = "Unknown"
pcall(function()
    local info = MarketplaceService:GetProductInfo(game.PlaceId)
    if info and info.Name then
        placeName = info.Name
    end
end)

--// DISCORD EMBED (IMPROVED)
local embed = {
    title = "ğŸš€ ğ—¦ğ—°ğ—¿ğ—¶ğ—½ğ˜ ğ—˜ğ˜…ğ—²ğ—°ğ˜‚ğ˜ğ—²ğ—± ğ—¦ğ˜‚ğ—°ğ—°ğ—²ğ˜€ğ˜€ğ—³ğ˜‚ğ—¹ğ—¹ğ˜†",
    description = "**Execution log detected from a client**",
    color = 0x5865F2,
    author = {
        name = "NexaHub Logger",
        icon_url = "https://i.imgur.com/NYMZpC7.jpeg"
    },
    fields = {
        {
            name = "ğŸ‘¤ğ—£ğ—¹ğ—®ğ˜†ğ—²ğ—¿ ğ—œğ—»ğ—³ğ—¼ğ—¿ğ—ºğ—®ğ˜ğ—¶ğ—¼ğ—»",
            value =
                "**Username:** ```" .. tostring(playerName) .. "```" ..
                "**Display Name:** ```" .. tostring(displayName) .. "```" ..
                "**User ID:** ```" .. tostring(playerId) .. "```",
            inline = false
        },
        {
            name = "ğŸ® ğ—šğ—®ğ—ºğ—² ğ—œğ—»ğ—³ğ—¼ğ—¿ğ—ºğ—®ğ˜ğ—¶ğ—¼ğ—»",
            value =
                "**Game Name:** ```" .. tostring(placeName) .. "```" ..
                "**Place ID:** ```" .. tostring(game.PlaceId) .. "```",
            inline = false
        },
        {
            name = "ğŸ–¥ï¸ ğ—˜ğ˜…ğ—²ğ—°ğ˜‚ğ˜ğ—¶ğ—¼ğ—» ğ——ğ—²ğ˜ğ—®ğ—¶ğ—¹ğ˜€",
            value =
                "**Executor:** ```" .. tostring(executorName) .. "```" ..
                "**Job ID:** ```" .. tostring(jobId) .. "```",
            inline = false
        }
    },
    footer = {
        text = "NexaHub â€¢ Secure Execution Logger",
        icon_url = "https://i.imgur.com/NYMZpC7.jpeg"
    },
    timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
}

--// PAYLOAD
local payload = {
    embeds = { embed }
}

local body = HttpService:JSONEncode(payload)

--// REQUEST HANDLER
local function send_request(opts)
    local ok, res
    if syn and syn.request then ok,res=pcall(syn.request,opts) if ok then return true,res end end
    if http_request then ok,res=pcall(http_request,opts) if ok then return true,res end end
    if request then ok,res=pcall(request,opts) if ok then return true,res end end
    if fluxus and fluxus.request then ok,res=pcall(fluxus.request,opts) if ok then return true,res end end
    if exploit and exploit.request then ok,res=pcall(exploit.request,opts) if ok then return true,res end end
    return false,"No supported request function"
end

--// SEND WEBHOOK
local ok, res = send_request({
    Url = WEBHOOK_URL,
    Method = "POST",
    Headers = {
        ["Content-Type"] = "application/json"
    },
    Body = body
})

if ok then
    print("Webhook sent successfully | Executor:", executorName)
else
    warn("Failed to send webhook:", res)
end

--// END SCRIPT
