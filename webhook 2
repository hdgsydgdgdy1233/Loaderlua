--// Services
local HttpService = game:GetService("HttpService")

--// Game Info
local PlaceId = game.PlaceId
local JobId = game.JobId

--// Fungsi ambil waktu WIB
local function getWIBTime()
	local utc = os.time()
	local wib = utc + (7 * 3600)
	return os.date("%d-%m-%Y %H:%M:%S", wib)
end

--// Support executor Roblox
local Request = (syn and syn.request) or (http_request) or (fluxus and fluxus.request) or (krnl and request)

--// Data lokasi dan Webhook
local Targets = {
	-- 1ï¸âƒ£ Props 1
	{
		Name = "Shark Hunt",
		Path = { "Props 1", "Shark Hunt" },
		Webhook = "https://discord.com/api/webhooks/1423664143562440724/9qZHqJFj7-yqouVGVjNtMTYvXJ8z3KsemY4Ed20R84K5leu9Ty5f6BfqvRSzCbaFj_eU",
		Color = 65280,
		Emoji = "ðŸŒŠ"
	},
	-- 2ï¸âƒ£ Props 2 (Worm)
	{
		Name = "Worm Hunt",
		Path = { "Props 2", "Model" },
		Webhook = "https://discord.com/api/webhooks/1423664496689283164/Le9ZzZa36Z1xe8g3McXVtmpzpvBYpnw4TYxhlnAmCPg9GNPWIvHmZmUhrQ7V6WR7-Aou",
		Color = 255,
		Emoji = "ðŸª±"
	},
	-- 3ï¸âƒ£ Props 3 (Megalodon)
	{
		Name = "Megalodon Hunt",
		Path = { "Props 3", "Megalodon Hunt" },
		Webhook = "https://discord.com/api/webhooks/1423231896959057984/JaJkw89NfOVPHaRcEAlGiTaDrwwb6326CWvl6A87mM8xuECcAgXmS24y0RZsECOe9d6l",
		Color = 16711680,
		Emoji = "ðŸ¦ˆ"
	},
	-- 4ï¸âƒ£ Props 4 (Ghost Shark)
	{
		Name = "Ghost Shark Hunt",
		Path = { "Props 4", "Ghost Shark Hunt" },
		Webhook = "https://discord.com/api/webhooks/1423664256166920253/e0j0Usun1KnRDM8y_kY_Z6-q2Ln0FB3RGXVcFulIDo5PC7ojnyLBhhDJk6zSqHEq9M32",
		Color = 10027263,
		Emoji = "ðŸ‘»"
	}
}

--// Status spawn masing-masing
local SpawnStatus = {}

--// Fungsi kirim webhook embed
local function sendWebhook(target)
	local joinScript = string.format(
		"game:GetService('TeleportService'):TeleportToPlaceInstance(%d, '%s', game.Players.LocalPlayer)",
		PlaceId,
		JobId
	)

	local data = {
		["embeds"] = { {
			["title"] = target.Emoji .. " " .. target.Name .. " Spawned!",
			["description"] = "**" .. target.Name .. " telah muncul di server!**",
			["color"] = target.Color,
			["fields"] = {
				{
					["name"] = "ðŸ•’ Time",
					["value"] = getWIBTime(),
					["inline"] = true
				},
				{
					["name"] = target.Name .. " - JobId",
					["value"] = "```\n" .. JobId .. "\n```",
					["inline"] = false
				},
				{
					["name"] = "Joinscript",
					["value"] = "```\n" .. joinScript .. "\n```",
					["inline"] = false
				}
			},
			["footer"] = { ["text"] = "Auto Hunt Detector â€¢ Made by Nexa" }
		} }
	}

	pcall(function()
		Request({
			Url = target.Webhook,
			Method = "POST",
			Headers = { ["Content-Type"] = "application/json" },
			Body = HttpService:JSONEncode(data)
		})
	end)

	print(string.format("[%s] %s Spawned! (%s)", getWIBTime(), target.Name, JobId))
end

--// Fungsi ambil path aman
local function getPathSafe(pathTable)
	local current = workspace["!!! MENU RINGS"]
	for _, name in ipairs(pathTable) do
		if current:FindFirstChild(name) then
			current = current[name]
		else
			return nil
		end
	end
	return current
end

--// Loop utama
while task.wait(1) do
	for _, target in ipairs(Targets) do
		local object = getPathSafe(target.Path)

		if object then
			local childrenCount = #object:GetChildren()
			if childrenCount > 0 then
				if not SpawnStatus[target.Name] then
					SpawnStatus[target.Name] = true
					sendWebhook(target)
				end
			else
				if SpawnStatus[target.Name] then
					SpawnStatus[target.Name] = false
				end
			end
		end
	end
end
