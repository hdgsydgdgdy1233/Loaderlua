local HttpService = game:GetService("HttpService")
local MegalodonPath = workspace["!!! MENU RINGS"]["Props 3"]["Megalodon Hunt"]

-- Webhook Discord
local WebhookURL = "https://discord.com/api/webhooks/1423231896959057984/JaJkw89NfOVPHaRcEAlGiTaDrwwb6326CWvl6A87mM8xuECcAgXmS24y0RZsECOe9d6l"

-- Game info
local PlaceId = game.PlaceId
local JobId = game.JobId

-- Status spawn
local MegalodonSpawned = false

-- Fungsi ambil waktu WIB
local function getWIBTime()
	local utc = os.time()
	local wib = utc + (7 * 3600) -- UTC+7
	return os.date("%d-%m-%Y %H:%M:%S", wib)
end

-- Fungsi kirim webhook embed
local function sendWebhookEmbed(title, description, color)
	local joinScript = string.format("Roblox.GameLauncher:LaunchGameInstance(%d, %q, '')", PlaceId, JobId)

	local data = {
		["embeds"] = {{
			["title"] = title,
			["description"] = description,
			["color"] = color,
			["fields"] = {
				{
					["name"] = "üïí Waktu (WIB)",
					["value"] = getWIBTime(),
					["inline"] = true
				},
				{
					["name"] = "Megalodon Hunt - JobId",
					["value"] = "```\n"..JobId.."\n```",
					["inline"] = false
				},
				{
					["name"] = "Joinscript",
					["value"] = "```\n"..joinScript.."\n```",
					["inline"] = false
				}
			}
		}}
	}

	local success, err = pcall(function()
		HttpService:PostAsync(
			WebhookURL,
			HttpService:JSONEncode(data),
			Enum.HttpContentType.ApplicationJson
		)
	end)

	if success then
		print("Webhook terkirim:", title)
	else
		warn("Gagal kirim webhook:", err)
	end
end

-- Loop cek setiap 1 detik
while task.wait(1) do
	if #MegalodonPath:GetChildren() > 0 then
		if not MegalodonSpawned then
			MegalodonSpawned = true
			sendWebhookEmbed("‚ö†Ô∏è Megalodon Spawned!", "Megalodon telah muncul di server!", 16711680) -- merah
		end
	else
		if MegalodonSpawned then
			MegalodonSpawned = false
			sendWebhookEmbed("‚úÖ Megalodon Despawned", "Megalodon sudah hilang / mati.", 65280) -- hijau
		end
	end
end
